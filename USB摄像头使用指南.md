# 🎥 USB摄像头监控系统使用指南

## 📋 系统配置说明

### 摄像头配置
- **笔记本内置摄像头**: 摄像头0 (系统跳过，不使用)
- **外接USB摄像头**: 摄像头1-6 (项目使用的6个摄像头)
- **总显示窗口**: 6个 (对应USB摄像头1-6)

### 硬件要求
- 6个外接USB摄像头
- USB 2.0/3.0端口或USB集线器
- 足够的USB带宽和供电能力

## 🚀 启动方式

### 方式1: 模拟USB摄像头测试（推荐先使用）
```bash
python 模拟USB摄像头启动.py
```
**特点**:
- ✅ 跳过内置摄像头（摄像头0）
- ✅ 模拟6个USB摄像头画面
- ✅ 完整的控制面板和日志系统
- ✅ 验证系统功能正常

### 方式2: USB摄像头连接指南
```bash
python USB摄像头连接指南.py
```
**特点**:
- ✅ 实时检测USB摄像头连接
- ✅ 指导正确连接USB摄像头
- ✅ 测试已连接的摄像头

### 方式3: USB摄像头检测工具
```bash
python USB摄像头检测工具.py
```
**特点**:
- ✅ 自动识别USB摄像头
- ✅ 生成专用启动脚本
- ✅ 配置摄像头映射

## 🔌 USB摄像头连接步骤

### 1. 准备阶段
1. 准备6个USB摄像头
2. 确保USB端口充足（或准备USB集线器）
3. 检查USB集线器供电能力

### 2. 连接步骤
1. **逐个连接**USB摄像头到计算机
2. **等待系统识别**每个摄像头
3. **运行检测工具**确认连接状态
4. **测试摄像头**确保画面正常

### 3. 预期结果
连接完成后应该看到：
- 摄像头0: 笔记本内置摄像头（系统跳过）
- 摄像头1: 第1个USB摄像头 ✅
- 摄像头2: 第2个USB摄像头 ✅
- 摄像头3: 第3个USB摄像头 ✅
- 摄像头4: 第4个USB摄像头 ✅
- 摄像头5: 第5个USB摄像头 ✅
- 摄像头6: 第6个USB摄像头 ✅

## 🖼️ 显示效果

### 左侧: 6个USB摄像头窗口 (3×2网格)
```
[USB摄像头1] [USB摄像头2] [USB摄像头3]
[USB摄像头4] [USB摄像头5] [USB摄像头6]
```

### 右侧: 控制面板窗口
- **摄像头控制**标签: 6个USB摄像头的参数调整
- **系统日志**标签: 实时日志显示
- **系统状态**标签: 系统状态监控

## ⚙️ 参数配置

### 每个USB摄像头可独立配置:
- 🔆 **亮度** (0-100)
- 📷 **曝光** (10-500毫秒)
- 🎨 **对比度** (0-100)
- 🌈 **饱和度** (0-100)
- 🔄 **自动曝光** (开/关)
- ☑️ **启用/禁用** (开/关)

### 配置文件支持:
```yaml
cameras:
  individual_settings:
    camera_0:  # 对应USB摄像头1
      brightness: 65
      exposure: 130
    camera_1:  # 对应USB摄像头2
      brightness: 55
      exposure: 110
    # ... 其他USB摄像头配置
```

## 🔍 故障排除

### 问题1: USB摄像头无法识别
**现象**: 运行检测工具只看到摄像头0
**解决方案**:
1. 检查USB摄像头是否正确连接
2. 尝试重新插拔USB摄像头
3. 更换USB端口
4. 检查USB集线器供电
5. 确认摄像头驱动已安装

### 问题2: 部分USB摄像头无法工作
**现象**: 只检测到部分USB摄像头
**解决方案**:
1. 检查USB带宽是否充足
2. 尝试降低摄像头分辨率
3. 使用USB 3.0端口
4. 分批连接摄像头测试

### 问题3: 画面卡顿或延迟
**现象**: USB摄像头画面不流畅
**解决方案**:
1. 降低帧率设置
2. 使用USB 3.0连接
3. 检查系统CPU和内存使用率
4. 关闭不必要的程序

### 问题4: 系统只显示内置摄像头
**现象**: 系统使用了摄像头0而不是USB摄像头
**解决方案**:
1. 使用专门的USB摄像头启动脚本
2. 确认USB摄像头已正确连接
3. 检查摄像头映射配置

## 🧪 测试流程

### 1. 基础连接测试
```bash
# 检查USB设备
lsusb | grep -i camera

# 检查视频设备
ls /dev/video*

# 运行连接指南
python USB摄像头连接指南.py
```

### 2. 功能验证测试
```bash
# 模拟测试（无需真实USB摄像头）
python 模拟USB摄像头启动.py

# 真实USB摄像头测试
python USB摄像头检测工具.py
```

### 3. 完整系统测试
```bash
# 生成并运行USB摄像头专用脚本
python USB摄像头启动.py
```

## 📊 系统监控

### 日志信息包含:
- USB摄像头连接状态
- 画面基线建立过程
- 红光检测变化记录
- 系统运行状态信息
- 错误和警告信息

### 状态监控包含:
- 每个USB摄像头的连接状态
- 基线计数和当前计数
- 基线面积和当前面积
- 系统整体运行状态

## 🎯 使用建议

### 开发阶段:
1. 先使用模拟模式验证系统功能
2. 逐步连接真实USB摄像头
3. 调整每个摄像头的参数设置
4. 测试红光检测功能

### 生产阶段:
1. 确保所有USB摄像头稳定连接
2. 配置最优的摄像头参数
3. 设置合适的检测阈值
4. 启用完整的日志记录

### 维护阶段:
1. 定期检查USB摄像头连接状态
2. 监控系统日志中的错误信息
3. 根据环境变化调整参数
4. 备份重要的配置文件

## 💡 性能优化

### USB带宽优化:
- 使用USB 3.0端口
- 避免多个高带宽设备共享USB控制器
- 合理分配摄像头到不同USB端口

### 系统资源优化:
- 根据需要调整摄像头分辨率
- 设置合适的帧率
- 监控CPU和内存使用情况

### 检测精度优化:
- 根据环境光照调整摄像头参数
- 设置合适的红光检测阈值
- 定期校准基线值

现在您可以按照这个指南逐步配置和使用USB摄像头监控系统！